<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>SWIFT编程 | Alw&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Swift学习与编程笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="SWIFT编程">
<meta property="og:url" content="http://example.com/2017/05/07/SWIFT%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="Alw&#39;s Blog">
<meta property="og:description" content="Swift学习与编程笔记">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Art/initializerDelegation01_2x.png">
<meta property="article:published_time" content="2017-05-07T12:18:41.000Z">
<meta property="article:modified_time" content="2026-01-01T09:27:55.822Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="swift">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Art/initializerDelegation01_2x.png">
  
    <link rel="alternate" href="/atom.xml" title="Alw's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 8.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Alw&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-SWIFT编程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/05/07/SWIFT%E7%BC%96%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2017-05-07T12:18:41.000Z" itemprop="datePublished">2017-05-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      SWIFT编程
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Swift学习与编程笔记</p>
</blockquote>
<span id="more"></span>    

<h1 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h1><h2 id="1-1-Swift单例"><a href="#1-1-Swift单例" class="headerlink" title="1.1 Swift单例"></a>1.1 Swift单例</h2><p>原理都是通过类属性实现，访问时通过类直接获取。</p>
<pre><code>	//MARK: 单例2
	let instance = Singleton()
	class Singleton {
		//MARK: 单例1
		static let sharedInstance = Singleton()
	
		//MARK: 单例2 
		class var sharedInstance2: Singleton {
			return instance
		}
	
		//MARK: 单例3
		static var shareInstance3:Single{
	        struct MyStatic{
	            static var instance :Single = Single()
	        }
	        return MyStatic.instance;
	    }
	}
</code></pre>
<p><strong>Caution:跨模块（framework）使用时Xcode不会提示相应类属性，手动写上即可；另外，<code>let</code>是线程安全的</strong>     </p>
<h2 id="1-2、构造函数"><a href="#1-2、构造函数" class="headerlink" title="1.2、构造函数"></a>1.2、构造函数</h2><h3 id="1-2-1-在构造函数里可以对常量进行修改，一旦修改后这个值就不会变了"><a href="#1-2-1-在构造函数里可以对常量进行修改，一旦修改后这个值就不会变了" class="headerlink" title="1.2.1 在构造函数里可以对常量进行修改，一旦修改后这个值就不会变了"></a>1.2.1 在构造函数里可以对常量进行修改，一旦修改后这个值就不会变了</h3><pre><code>	class test {
	    let text: String
	    init(text: String) {
	        self.text = text
	    }
	}
</code></pre>
<h3 id="1-2-2-系统合成构造函数主要包括两种：默认构造函数（不用多说），逐一赋值构造函数（结构体，类类型是没有的）"><a href="#1-2-2-系统合成构造函数主要包括两种：默认构造函数（不用多说），逐一赋值构造函数（结构体，类类型是没有的）" class="headerlink" title="1.2.2 系统合成构造函数主要包括两种：默认构造函数（不用多说），逐一赋值构造函数（结构体，类类型是没有的）"></a>1.2.2 系统合成构造函数主要包括两种：默认构造函数（不用多说），逐一赋值构造函数（结构体，类类型是没有的）</h3><pre><code>	struct Size {
	    var width = 0.0, height = 0.0
	}
	let zhuyi = Size(width: 2.0, height: 2.0)
</code></pre>
<h3 id="1-2-2-两段式构造"><a href="#1-2-2-两段式构造" class="headerlink" title="1.2.2 两段式构造"></a>1.2.2 两段式构造</h3><ul>
<li>第一个阶段，每个存储型属性被引入它们的类指定一个初始值。当每个存储型属性的初始值被确定后;  </li>
<li>第二阶段开始，它给每个类一次机会，在新实例准备使用之前进一步定制它们的存储型属性。</li>
</ul>
<h3 id="1-2-3-指定构造器，便利构造器"><a href="#1-2-3-指定构造器，便利构造器" class="headerlink" title="1.2.3 指定构造器，便利构造器"></a>1.2.3 指定构造器，便利构造器</h3><ul>
<li><p><strong>指定构造器</strong>是类必须有的至少一个。可以通过继承了父类中的指定构造器而满足了这个条件</p>
<pre><code>  class test {
      init(parametes)
  }
</code></pre>
</li>
<li><p><strong>便利构造器</strong>是类中比较次要的、辅助型的构造器。  </p>
<pre><code>   class test {
      convenience  init(parametes)
      }
</code></pre>
</li>
</ul>
<p>两者的关系如下图：<br><img src="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Art/initializerDelegation01_2x.png" alt="img"><br><strong>1.指定构造器必须向上也就是父类继续</strong><br><strong>2.便利构造器必须横向向指定构造器依赖，也就是便利构造器必须导致一个指定构造器被调用</strong>  </p>
<ul>
<li><p>便利构造器不能直接调用父类的便利构造器</p>
</li>
<li><p>构造器的自动继承<br>子类在默认情况下不会继承父类的构造器。但是如果满足特定条件，父类构造器是可以被自动继承的。</p>
<ul>
<li>子类中引入的所有新属性都提供了默认值</li>
<li>如果子类没有定义任何<strong>指定构造器</strong>，它将自动继承所有父类的<strong>指定构造器</strong>。（OC继承；C++不继承）</li>
<li>如果子类提供了所有父类<strong>指定构造器</strong>的实现——无论是通过规则 1 继承过来的，还是提供了自定义实现——它将自动继承所有父类的<strong>便利构造器</strong>。</li>
<li>子类可以将父类的<strong>指定构造器</strong>重写为<strong>便利构造器</strong></li>
</ul>
</li>
<li><p>demo:</p>
<pre><code>  class Food {
      var name: String
      init(name: String) {//指定构造器
          self.name = name
      }
      convenience init() {//便利构造器， 符合横向代理原则：调用指定构造器
          self.init(name: &quot;[Unnamed]&quot;)
      }
  }
  
  //继承
  class RecipeIngredient: Food {
      var quantity: Int//新增属性
      init(name: String, quantity: Int) {
          //符合两段式构造第一阶段，给属性一个初始化值
          self.quantity = quantity//应该不可以访问self
          super.init(name: name)//还是处于第一阶段，初始化父类部分属性
          
      }
      //子类的便利构造器与父类的指定构造器匹配，因些也算重写所以加上 override
      override convenience init(name: String) {
          self.init(name: name, quantity: 1)//调用指定构造器
      }
      
      //由于子类实现了父类的所有指定构造器，所以子类便继承了父类的便利构造器
      //convenience init() {
      //         self.init(name: &quot;[Unnamed]&quot;)
      // }
  }
  
  //子类没有构造器，所以继承所有的父类构造器
  class ShoppingListItem: RecipeIngredient {
      var purchased = false
      var description: String {
          var output = &quot;\(quantity) x \(name)&quot;
          output += purchased ? &quot; ✔&quot; : &quot; ✘&quot;
          return output
      }
  }
</code></pre>
</li>
</ul>
<h2 id="1-3-函数-闭包"><a href="#1-3-函数-闭包" class="headerlink" title="1.3 函数 &amp; 闭包"></a>1.3 函数 &amp; 闭包</h2><h3 id="1-3-1-函数"><a href="#1-3-1-函数" class="headerlink" title="1.3.1 函数"></a>1.3.1 函数</h3><ul>
<li><p>引用形参<code>inout</code>,作用与C中的引用是一样的作用，然后在调用时使用<code>&amp;</code>传值</p>
</li>
<li><p>函数类型（闭包），swift中函数也是一种类型，就是通过参数列表及返回值来定义一个函数类型的，例如：</p>
<pre><code>  var myFunc: (Int, Int)-&gt; Int
</code></pre>
</li>
<li><p>函数形参与标签，如果函数定义时没有标签时形参名就是标签   </p>
<pre><code>  func test(number:Int, number1:Int)-&gt;Void
</code></pre>
</li>
</ul>
<h3 id="1-3-2-闭包其实就是代码块，与OC中的block类似。闭包表达式语法："><a href="#1-3-2-闭包其实就是代码块，与OC中的block类似。闭包表达式语法：" class="headerlink" title="1.3.2 闭包其实就是代码块，与OC中的block类似。闭包表达式语法："></a>1.3.2 闭包其实就是代码块，与OC中的block类似。闭包表达式语法：</h3><pre><code>{ (parametees) -&gt; returnType in
	//statements
	
}
</code></pre>
<p>闭包的函数体由关键字<code>in</code>引入</p>
<h3 id="1-3-3-闭包“逃逸”"><a href="#1-3-3-闭包“逃逸”" class="headerlink" title="1.3.3 闭包“逃逸”"></a>1.3.3 闭包“逃逸”</h3><p>所设置的闭包逃逸是指这个闭包是要函数执行完成后再去执行的，也就是异步执行的回调。在函数声明是需要在闭包入参之前添加关键字<code>@escaping</code><br>，因为逃逸了所以如果访问成员时需要添加<code>self</code>。</p>
<h2 id="1-4-类型转换，检查"><a href="#1-4-类型转换，检查" class="headerlink" title="1.4 类型转换，检查"></a>1.4 类型转换，检查</h2><h3 id="1-4-1-swift类型转主要通过两个操作符：as-与as-。as-表示转换时可能失败返回nil-as-类型转换表示一定会转换成功并强解引用"><a href="#1-4-1-swift类型转主要通过两个操作符：as-与as-。as-表示转换时可能失败返回nil-as-类型转换表示一定会转换成功并强解引用" class="headerlink" title="1.4.1 swift类型转主要通过两个操作符：as?与as!。as?表示转换时可能失败返回nil,as!类型转换表示一定会转换成功并强解引用"></a>1.4.1 swift类型转主要通过两个操作符：<code>as?</code>与<code>as!</code>。<code>as?</code>表示转换时可能失败返回nil,<code>as!</code>类型转换表示一定会转换成功并强解引用</h3><h3 id="1-4-2-swift类型检查操作符：is。"><a href="#1-4-2-swift类型检查操作符：is。" class="headerlink" title="1.4.2 swift类型检查操作符：is。"></a>1.4.2 swift类型检查操作符：<code>is</code>。</h3><h1 id="二、Swift混编"><a href="#二、Swift混编" class="headerlink" title="二、Swift混编"></a>二、Swift混编</h1><h2 id="2-1-Swift-与-OC-混编"><a href="#2-1-Swift-与-OC-混编" class="headerlink" title="2.1 Swift 与 OC 混编"></a>2.1 Swift 与 OC 混编</h2><h3 id="2-1-1-OC调用Swift"><a href="#2-1-1-OC调用Swift" class="headerlink" title="2.1.1 OC调用Swift"></a>2.1.1 OC调用Swift</h3><p>OC要调用Swift需要借助于<code>yourtargetname-swift.h</code>   </p>
<ul>
<li><p>当我们在一个OC的工程中添加Swift语言Xcode会提示是否添加桥接文件；</p>
</li>
<li><p>创建Swift类，为了让OC能调用还需要在类前添加<code>@objc</code>表示Swift代码暴露给OC用；<em><strong>注意：<code>@objc</code>是不可以将非继承<code>NSObject</code>转换成OC可调用的对象</strong></em></p>
</li>
<li><p>但OC怎么使用Swift呢？这就需要<code>yourtargetname-swift.h</code>，这个头文件名可以要<code>target-&gt;Build Setting-&gt;Objective-C Generated Interface Header Name</code>。<strong>需要注意的是这个头文件target中只有一个，而且是看不到的，它是会在编译时生成，如果模块是一个framework可能在生成的framework头文件里可以看到此文件</strong>，代码如下：</p>
<pre><code>  #import &quot;yourtargetname-swift.h&quot;
  
  ...        
  swiftclass *instance = [[swiftclass alloc]init];
</code></pre>
</li>
</ul>
<h3 id="2-1-2-Swift调用OC"><a href="#2-1-2-Swift调用OC" class="headerlink" title="2.1.2 Swift调用OC"></a>2.1.2 Swift调用OC</h3><ul>
<li><p>Swift要调用OC需要借助于<code>yourproject-Bridging-Header.h</code>,在这个头文件里通过<code>import</code>相关OC库头文件，如：</p>
<pre><code>  #import &lt;GoogleMaps/GoogleMaps.h&gt;
</code></pre>
</li>
</ul>
<p><strong>注意：</strong>   </p>
<ul>
<li><strong>这个头文件Xcode会帮你生成，只要你在Swift工程添加OC类Xcode就会提示你是否需要生成这个文件。</strong></li>
<li><strong>如果一个是在工程中创建了一个framework的target，此时系统会生成一个<code>yourtargetname.h</code>的文件，在这个头文件里通过<code>import</code>相关OC库头文件即可。</strong></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/05/07/SWIFT%E7%BC%96%E7%A8%8B/" data-id="cuidNsBDytMIwOT0mw6kCQ_tm" data-title="SWIFT编程" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/" rel="tag">swift</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/27/Unity-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Unity 学习笔记
        
      </div>
    </a>
  
  
    <a href="/2017/04/27/git-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">git 使用手册</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Lua/">Lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity/">Unity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/">学习资源</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-C/" rel="tag">C&#x2F;C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dev/" rel="tag">Dev</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/" rel="tag">Lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/" rel="tag">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/" rel="tag">swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" rel="tag">使用手册</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" rel="tag">学习资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E9%A1%B5/" rel="tag">网页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/C-C/" style="font-size: 10px;">C/C++</a> <a href="/tags/Dev/" style="font-size: 20px;">Dev</a> <a href="/tags/Lua/" style="font-size: 10px;">Lua</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/iOS/" style="font-size: 16.67px;">iOS</a> <a href="/tags/swift/" style="font-size: 10px;">swift</a> <a href="/tags/%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" style="font-size: 13.33px;">使用手册</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" style="font-size: 10px;">学习资源</a> <a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 10px;">网页</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/01/">January 2026</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">January 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2026/01/01/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2025/01/01/Android-Dev/">Android Dev</a>
          </li>
        
          <li>
            <a href="/2018/10/25/C-C-C-%E5%AF%BC%E5%85%A5lua%E6%B5%85%E6%9E%90/">C/C++/C#导入lua浅析</a>
          </li>
        
          <li>
            <a href="/2017/07/10/Lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Lua学习笔记</a>
          </li>
        
          <li>
            <a href="/2017/06/27/Unity-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Unity 学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2026 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>